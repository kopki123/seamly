import{i as g,C as V,r as m,z as n,o as _,j as y,k as o,A as v,a as u,B as i,m as a,u as k,R as F}from"./index-LZebK88m.js";import{_ as B,e as R,p as S,F as d}from"./FormItem-nMWqiYq0.js";import{T as C}from"./TextButton-TZ-9-CXc.js";import{_ as p}from"./Input.vue_vue_type_script_setup_true_lang-DvqPymHY.js";import{u as L}from"./index-D8B2W3nM.js";import{u as N}from"./index-CB_-mfuI.js";const T={class:"mt-2 mb-4 text-sm text-center"},I=g({__name:"Login",setup(U){const f=v(),x=V(),l=m(),r=m(!1),t=n({email:"",password:""}),c=n({email:[{pattern:R,message:"請輸入有效email格式"}],password:[{pattern:S,message:"請輸入6-16位字母或數字"}]});async function b(){if(r.value=!0,!l.value.validate()){r.value=!1;return}const{destroy:e}=L(),s=await x.login(t);if(r.value=!1,e(),s.status==="error"){N({message:s.message,type:"error"});return}await f.replace("/")}return(w,e)=>(_(),y(B,{ref_key:"ruleFormRef",ref:l,model:t,rules:c,class:"w-[90%] max-w-[450px] mx-auto mt-10 p-8 flex flex-col items-center bg-white rounded-2xl",onSubmit:b},{default:o(()=>[e[4]||(e[4]=u("p",{class:"text-xl font-bold text-center",textContent:"登入"},null,-1)),u("div",T,[e[3]||(e[3]=i(" 尚未註冊？ ")),a(k(F),{to:"/register",class:"text-primary"},{default:o(()=>e[2]||(e[2]=[i(" 立即註冊 ")])),_:1})]),a(d,{label:"電子郵件",prop:"email"},{default:o(()=>[a(p,{modelValue:t.email,"onUpdate:modelValue":e[0]||(e[0]=s=>t.email=s),type:"email"},null,8,["modelValue"])]),_:1}),a(d,{label:"密碼",prop:"password"},{default:o(()=>[a(p,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=s=>t.password=s),type:"password"},null,8,["modelValue"])]),_:1}),a(C,{text:"登入",type:"submit",disabled:r.value,class:"my-4 bg-primary-dark"},null,8,["disabled"])]),_:1},8,["model","rules"]))}});export{I as default};
