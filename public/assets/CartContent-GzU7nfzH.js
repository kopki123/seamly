import{o as c,c as u,a as t,i as _,A as f,G as y,r as k,g as q,w as g,x as d,B as w,u as l,m as i,J as $,F as I,K as B,d as T,j as h,l as j}from"./index-COMXhcBS.js";import{u as C}from"./index-GdYk5yA4.js";import{_ as L}from"./NumberInput.vue_vue_type_script_setup_true_lang-YdO1PVN6.js";import{u as V}from"./useDebounce-CSEofG8k.js";import{T as b}from"./TextButton-r7pYWVFz.js";import{D}from"./Divider-Dq0HTROm.js";function N(m,s){return c(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}const S={class:"w-full mb-4 p-4 rounded-xl shadow-md flex flex-col justify-between gap-4 md:flex-row"},E=["src"],F={class:"flex flex-col gap-2"},G=["textContent"],A=["textContent"],H={class:"text-xs text-primary-dark"},J=["textContent"],K={class:"flex flex-row items-center gap-3 md:flex-col md:items-start"},M={class:"text-xs sm:text-md text-primary-dark"},R=["textContent"],U=_({__name:"CartItem",props:{cartItem:{}},setup(m){const s=m,a=f(),r=y(),e=k(s.cartItem.quantity),p=q(()=>s.cartItem.product.price*s.cartItem.quantity);async function x(){const{destroy:n}=C();if((await r.removeCartItem({id:s.cartItem.id})).status==="error"){n();return}n()}return g(()=>s.cartItem.quantity,n=>{e.value=n}),g(e,V(async n=>{if(e.value===s.cartItem.quantity)return;const{destroy:o}=C();(await r.updateCartItem({id:s.cartItem.id,quantity:n})).status==="error"&&(e.value=s.cartItem.quantity),o()},1)),(n,o)=>(c(),u("div",S,[t("div",{class:"flex gap-3 hover:cursor-pointer",onClick:o[0]||(o[0]=v=>l(a).push({name:"product",params:{id:n.cartItem.product.id}}))},[t("img",{src:n.cartItem.product.image,alt:"",class:"w-20 h-20 lg:w-32 lg:h-32 object-cover aspect-square rounded overflow-hidden"},null,8,E),t("div",F,[t("p",{textContent:d(n.cartItem.product.title),class:"text-xl"},null,8,G),t("p",{textContent:d(n.cartItem.product.description),class:"text-sm"},null,8,A),t("p",H,[o[2]||(o[2]=w(" NT. ")),t("span",{textContent:d(n.cartItem.product.price),class:"text-lg"},null,8,J)])])]),t("div",K,[o[3]||(o[3]=t("p",{class:"shrink-0"},"數量 : ",-1)),i(L,{modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=v=>e.value=v),min:1,class:"w-36"},null,8,["modelValue"]),i($,{icon:l(N),class:"w-7 h-7 p-1",onClick:x},null,8,["icon"])]),t("p",M,[o[4]||(o[4]=w(" NT. ")),t("span",{textContent:d(p.value),class:"text-lg sm:text-2xl"},null,8,R)])]))}}),z={class:"p-8 rounded-xl shadow-md"},O={class:"my-3 flex justify-between"},P=["textContent"],Q={class:"mt-3 flex justify-end items-end gap-2"},W=["textContent"],X=_({__name:"CartDetail",setup(m){const s=f(),a=y();return(r,e)=>(c(),u(I,null,[t("div",z,[t("div",O,[e[1]||(e[1]=t("span",{textContent:"商品金額"},null,-1)),t("span",{textContent:d(`$ ${l(a).cartTotal}`)},null,8,P)]),i(D,{class:"my-3"}),t("div",Q,[e[2]||(e[2]=t("span",{textContent:"小計"},null,-1)),t("span",{textContent:d(`$ ${l(a).cartTotal}`),class:"text-2xl"},null,8,W)])]),i(b,{text:"下一步",class:"my-8 bg-primary-dark",onClick:e[0]||(e[0]=p=>l(s).push({name:"orderCheckout"}))})],64))}}),Y={class:"mt-10 mx-auto flex flex-col justify-center items-center gap-4"},Z=_({__name:"EmptyCart",setup(m){const s=f();return(a,r)=>(c(),u("div",Y,[i($,{icon:l(B),class:"w-24 h-w-24 text-primary-dark"},null,8,["icon"]),r[1]||(r[1]=t("p",{textContent:"您的購物車中沒有商品",class:"text-xl font-semibold tracking-widest"},null,-1)),i(b,{text:"去購物",class:"!w-60 my-4 bg-primary-dark",onClick:r[0]||(r[0]=e=>l(s).push({name:"home"}))})]))}}),tt={key:1,class:"grid gap-8 md:grid-cols-12"},et={class:"md:col-span-8"},st={class:"md:col-span-4"},it=_({__name:"CartContent",setup(m){const s=f(),a=y(),r=k(!0);return T(async()=>{const{destroy:e}=C();if((await a.getCart()).status==="error"){e(),s.push({name:"home"});return}r.value=!1,e()}),(e,p)=>r.value||!l(a).cartTotal?(c(),h(Z,{key:0})):(c(),u("div",tt,[t("div",et,[(c(!0),u(I,null,j(l(a).cartItems,x=>(c(),h(U,{key:x.id,cartItem:x},null,8,["cartItem"]))),128))]),t("div",st,[i(X)])]))}});export{it as default};
