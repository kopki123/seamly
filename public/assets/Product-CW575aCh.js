import{e as y,v,r as u,a as C,f as h,j as S,m as t,t as n,s as V,l as i,A as w,z as b,q as k}from"./index-FraBQ2Kp.js";import{u as N}from"./products-CzTsEpKa.js";import{u as T}from"./cart-BsFhFb_R.js";import{u as d}from"./index-x7-wbyOs.js";import{_ as B}from"./NumberInput.vue_vue_type_script_setup_true_lang-DfoxdHbJ.js";import{T as q}from"./TextButton-CfOdV5Zv.js";import{u as m}from"./index-DZ5lCXHw.js";const I={key:0,class:"max-w-[1280px] mt-10 mx-auto px-8 sm:py-10"},L={class:"mx-auto grid gap-y-8 md:grid-cols-2 md:gap-x-16"},P=["src"],j={class:"flex flex-col gap-4"},M=["textContent"],R=["textContent"],U={class:"w-24 px-2 py-1 flex justify-around items-baseline text-primary-dark font-medium bg-primary-light rounded-lg"},z=["textContent"],A=["textContent"],O=y({__name:"Product",setup(D){const p=b(),l=k(),x=v(),g=N(),_=T(),c=u(!1),e=u(),r=u(1);async function f(){if(!x.isLoggedIn){l.push({name:"login"});return}const{destroy:o}=d();if((await _.addCartItem({productId:e.value.id,quantity:r.value})).status==="error"){o(),m({message:"新增失敗",type:"error"});return}m({message:"新增至購物車",type:"success"}),o()}return C(async()=>{const{destroy:o}=d(),{params:{id:s}}=p,a=await g.getSingleProduct({id:s});if(a.status==="error"){o(),l.push("/");return}e.value=a.data.product,c.value=!0,o()}),(o,s)=>c.value?(h(),S("div",I,[t("div",L,[t("img",{src:e.value.image,alt:"",class:"max-h-[500px] rounded-lg"},null,8,P),t("div",j,[t("p",{textContent:n(e.value.title),class:"text-3xl font-bold"},null,8,M),t("p",{textContent:n(e.value.description),class:"text-xl mt-2"},null,8,R),t("p",U,[s[1]||(s[1]=V(" NT. ")),t("span",{textContent:n(e.value.price),class:"text-2xl"},null,8,z)]),t("p",{textContent:n(e.value.content),class:"leading-8 text-gray-500/75"},null,8,A),i(B,{class:"!w-32",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=a=>r.value=a),min:1},null,8,["modelValue"]),i(q,{text:"加入購物車",class:"!w-1/2 my-4 text-center bg-primary",onClick:f})])])])):w("",!0)}});export{O as default};
