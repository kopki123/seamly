import{f as c,j as m,m as t,e as _,q as f,r as k,d as b,w as g,t as d,s as w,u as l,l as u,I,F as $,E as q,a as j,g as h,k as B}from"./index-BaY4tWnM.js";import{u as y}from"./cart-Ch5vp7Vz.js";import{u as C}from"./index-DG-BaOgy.js";import{_ as L}from"./NumberInput.vue_vue_type_script_setup_true_lang-R91mBnXk.js";import{T}from"./TextButton-GsUtFiQ-.js";import{D as V}from"./Divider-jWMbrFgE.js";function D(i,s){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function N(i,s=.5){let r;return(...o)=>{clearTimeout(r),r=setTimeout(()=>i(...o),s*1e3)}}const S={class:"w-full mb-4 p-4 rounded-xl shadow-md flex flex-col justify-between gap-4 md:flex-row"},E=["src"],F={class:"flex flex-col gap-2"},G=["textContent"],H=["textContent"],M={class:"text-xs text-primary-dark"},R=["textContent"],U={class:"flex flex-row items-center gap-3 md:flex-col md:items-start"},z={class:"text-xs sm:text-md text-primary-dark"},A=["textContent"],J=_({__name:"CartItem",props:{cartItem:{}},setup(i){const s=i,r=f(),o=y(),e=k(s.cartItem.quantity),p=b(()=>s.cartItem.product.price*s.cartItem.quantity);async function x(){const{destroy:a}=C();if((await o.removeCartItem({id:s.cartItem.id})).status==="error"){a();return}a()}return g(()=>s.cartItem.quantity,a=>{e.value=a}),g(e,N(async a=>{if(e.value===s.cartItem.quantity)return;const{destroy:n}=C();(await o.updateCartItem({id:s.cartItem.id,quantity:a})).status==="error"&&(e.value=s.cartItem.quantity),n()},1)),(a,n)=>(c(),m("div",S,[t("div",{class:"flex gap-3 hover:cursor-pointer",onClick:n[0]||(n[0]=v=>l(r).push({name:"product",params:{id:a.cartItem.product.id}}))},[t("img",{src:a.cartItem.product.image,alt:"",class:"w-20 h-20 lg:w-32 lg:h-32 object-cover rounded-xl overflow-hidden"},null,8,E),t("div",F,[t("p",{textContent:d(a.cartItem.product.title),class:"text-xl"},null,8,G),t("p",{textContent:d(a.cartItem.product.description),class:"text-sm"},null,8,H),t("p",M,[n[2]||(n[2]=w(" NT. ")),t("span",{textContent:d(a.cartItem.product.price),class:"text-lg"},null,8,R)])])]),t("div",U,[n[3]||(n[3]=t("p",{class:"shrink-0"},"數量 : ",-1)),u(L,{modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=v=>e.value=v),min:1,class:"w-36"},null,8,["modelValue"]),u(I,{icon:l(D),class:"w-7 h-7 p-1",onClick:x},null,8,["icon"])]),t("p",z,[n[4]||(n[4]=w(" NT. ")),t("span",{textContent:d(p.value),class:"text-lg sm:text-2xl"},null,8,A)])]))}}),K={class:"p-8 rounded-xl shadow-md"},O={class:"my-3 flex justify-between"},P=["textContent"],Q={class:"mt-3 flex justify-end items-end gap-2"},W=["textContent"],X=_({__name:"CartDetail",setup(i){const s=f(),r=y();return(o,e)=>(c(),m($,null,[t("div",K,[t("div",O,[e[1]||(e[1]=t("span",{textContent:"商品金額"},null,-1)),t("span",{textContent:d(`$ ${l(r).cartTotal}`)},null,8,P)]),u(V,{class:"my-3"}),t("div",Q,[e[2]||(e[2]=t("span",{textContent:"小計"},null,-1)),t("span",{textContent:d(`$ ${l(r).cartTotal}`),class:"text-2xl"},null,8,W)])]),u(T,{text:"下一步",class:"my-8 bg-primary-dark",onClick:e[0]||(e[0]=p=>l(s).push({name:"orderCheckout"}))})],64))}}),Y={class:"mt-10 mx-auto flex flex-col justify-center items-center gap-4"},Z=_({__name:"EmptyCart",setup(i){const s=f();return(r,o)=>(c(),m("div",Y,[u(I,{icon:l(q),class:"w-24 h-w-24 text-primary-dark"},null,8,["icon"]),o[1]||(o[1]=t("p",{textContent:"您的購物車中沒有商品",class:"text-xl font-semibold tracking-widest"},null,-1)),u(T,{text:"去購物",class:"!w-60 my-4 bg-primary-dark",onClick:o[0]||(o[0]=e=>l(s).push({name:"home"}))})]))}}),tt={key:1,class:"grid gap-8 md:grid-cols-12"},et={class:"md:col-span-8"},st={class:"md:col-span-4"},it=_({__name:"CartContent",setup(i){const s=f(),r=y(),o=k(!0);return j(async()=>{const{destroy:e}=C();if((await r.getCart()).status==="error"){e(),s.push({name:"home"});return}o.value=!1,e()}),(e,p)=>o.value||!l(r).cartTotal?(c(),h(Z,{key:0})):(c(),m("div",tt,[t("div",et,[(c(!0),m($,null,B(l(r).cartItems,x=>(c(),h(J,{key:x.id,cartItem:x},null,8,["cartItem"]))),128))]),t("div",st,[u(X)])]))}});export{it as default};
