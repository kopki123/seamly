import{e as y,v as V,r as m,x as u,f as _,g as v,i as o,q as F,m as n,s as i,l as a,u as R,R as k}from"./index-FraBQ2Kp.js";import{_ as S,e as B,p as C,a as d,F as p}from"./Input.vue_vue_type_script_setup_true_lang-CL-ZSAJR.js";import{T as N}from"./TextButton-CfOdV5Zv.js";import{u as T}from"./index-x7-wbyOs.js";import{u as f}from"./index-DZ5lCXHw.js";const U={class:"mt-2 mb-4 text-sm text-center"},M=y({__name:"Register",setup(L){const x=F(),c=V(),l=m(),r=m(!1),s=u({email:"",password:""}),b=u({email:[{pattern:B,message:"請輸入有效email格式"}],password:[{pattern:C,message:"請輸入6-16位字母或數字"}]});async function g(){if(r.value=!0,!l.value.validate()){r.value=!1;return}const{destroy:e}=T(),t=await c.register(s);if(r.value=!1,e(),t.status==="error"){f({message:t.message,type:"error"});return}f({message:"請驗證電子郵件",type:"success"}),await x.replace("/")}return(w,e)=>(_(),v(S,{ref_key:"ruleFormRef",ref:l,model:s,rules:b,class:"w-[90%] max-w-[450px] mx-auto mt-10 p-8 flex flex-col items-center bg-white rounded-2xl",onSubmit:g},{default:o(()=>[e[4]||(e[4]=n("p",{class:"text-xl font-bold text-center",textContent:"註冊"},null,-1)),n("div",U,[e[3]||(e[3]=i(" 已經擁有帳號？ ")),a(R(k),{to:"/login",class:"text-primary"},{default:o(()=>e[2]||(e[2]=[i(" 立即登入 ")])),_:1})]),a(p,{label:"電子郵件",prop:"email"},{default:o(()=>[a(d,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=t=>s.email=t),type:"email"},null,8,["modelValue"])]),_:1}),a(p,{label:"密碼",prop:"password"},{default:o(()=>[a(d,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.password=t),type:"password"},null,8,["modelValue"])]),_:1}),a(N,{text:"註冊",type:"submit",disabled:r.value,class:"my-4 bg-primary-dark"},null,8,["disabled"])]),_:1},8,["model","rules"]))}});export{M as default};
