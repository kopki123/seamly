import{i as y,C,G as v,r as l,d as h,o as S,c as V,a as t,x as a,B as w,m as d,H as b,E as k,A as B}from"./index-LZebK88m.js";import{u as N}from"./products-Rkx3xXE7.js";import{u as i}from"./index-D8B2W3nM.js";import{_ as T}from"./NumberInput.vue_vue_type_script_setup_true_lang-C3lnlE3q.js";import{T as I}from"./TextButton-TZ-9-CXc.js";import{u as m}from"./index-CB_-mfuI.js";const L={key:0,class:"max-w-[1280px] mt-10 mx-auto px-8 sm:py-10"},P={class:"mx-auto grid gap-y-8 md:grid-cols-2 md:gap-x-16"},q=["src"],E={class:"flex flex-col gap-4"},G=["textContent"],M=["textContent"],R={class:"w-24 px-2 py-1 flex justify-around items-baseline text-primary-dark font-medium bg-primary-light rounded-lg"},U=["textContent"],$=["textContent"],j=["textContent"],O=y({__name:"Product",setup(A){const p=k(),u=B(),x=C(),_=N(),g=v(),c=l(!1),e=l(),r=l(1);async function f(){if(!x.isLoggedIn){u.push({name:"login"});return}const{destroy:o}=i();if((await g.addCartItem({productId:e.value.id,quantity:r.value})).status==="error"){o(),m({message:"新增失敗",type:"error"});return}m({message:"新增至購物車",type:"success"}),o()}return h(async()=>{const{destroy:o}=i(),{params:{id:s}}=p,n=await _.getSingleProduct({id:s});if(n.status==="error"){o(),u.push({name:"home"});return}e.value=n.data.product,c.value=!0,o()}),(o,s)=>c.value?(S(),V("div",L,[t("div",P,[t("img",{src:e.value.image,alt:"",class:"max-h-[500px] rounded-lg"},null,8,q),t("div",E,[t("p",{textContent:a(e.value.title),class:"text-3xl font-bold"},null,8,G),t("p",{textContent:a(e.value.description),class:"text-xl mt-2"},null,8,M),t("p",R,[s[1]||(s[1]=w(" NT. ")),t("span",{textContent:a(e.value.price),class:"text-2xl"},null,8,U)]),t("p",{textContent:a(`已銷售${e.value.sold}件`),class:"text-sm"},null,8,$),t("p",{textContent:a(e.value.content),class:"leading-8 text-gray-500/75"},null,8,j),d(T,{class:"!w-32",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=n=>r.value=n),min:1},null,8,["modelValue"]),d(I,{text:"加入購物車",class:"!w-1/2 my-4 text-center bg-primary",onClick:f})])])])):b("",!0)}});export{O as default};
